<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_60) on Sat Oct 24 07:43:14 CDT 2015 -->
<title>AnomalyLikelihood</title>
<meta name="date" content="2015-10-24">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="AnomalyLikelihood";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":9,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AnomalyLikelihood.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/numenta/nupic/algorithms/Anomaly.Mode.html" title="enum in org.numenta.nupic.algorithms"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.AnomalyParams.html" title="class in org.numenta.nupic.algorithms"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/numenta/nupic/algorithms/AnomalyLikelihood.html" target="_top">Frames</a></li>
<li><a href="AnomalyLikelihood.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.numenta.nupic.algorithms</div>
<h2 title="Class AnomalyLikelihood" class="title">Class AnomalyLikelihood</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../../org/numenta/nupic/algorithms/Anomaly.html" title="class in org.numenta.nupic.algorithms">org.numenta.nupic.algorithms.Anomaly</a></li>
<li>
<ul class="inheritance">
<li>org.numenta.nupic.algorithms.AnomalyLikelihood</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">AnomalyLikelihood</span>
extends <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html" title="class in org.numenta.nupic.algorithms">Anomaly</a></pre>
<div class="block"><p>The anomaly likelihood computer.</p>
 
 <p>From <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html" title="class in org.numenta.nupic.algorithms"><code>Anomaly</code></a>:</p>
 
 This module analyzes and estimates the distribution of averaged anomaly scores
 from a CLA model. Given a new anomaly score `s`, estimates `P(score >= s)`.
 
 The number `P(score >= s)` represents the likelihood of the current state of
 predictability. For example, a likelihood of 0.01 or 1% means we see this much
 predictability about one out of every 100 records. The number is not as unusual
 as it seems. For records that arrive every minute, this means once every hour
 and 40 minutes. A likelihood of 0.0001 or 0.01% means we see it once out of
 10,000 records, or about once every 7 days.
 
 <p>
 <em>
 USAGE FOR LOW-LEVEL FUNCTIONS
 -----------------------------
 </em>
 <pre>
 There are two primary interface routines:

 estimateAnomalyLikelihoods: batch routine, called initially and once in a
                                while
 updateAnomalyLikelihoods: online routine, called for every new data point

 1. Initially::

    <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms"><code>AnomalyLikelihoodMetrics</code></a> { likelihoods, avgRecordList, estimatorParams } = 
        <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#estimateAnomalyLikelihoods-java.util.List-int-int-"><code>estimateAnomalyLikelihoods(List, int, int)</code></a>

 2. Whenever you get new data::

    <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms"><code>AnomalyLikelihoodMetrics</code></a> { likelihoods, avgRecordList, estimatorParams } = 
       <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#updateAnomalyLikelihoods-java.util.List-org.numenta.nupic.util.NamedTuple-"><code>updateAnomalyLikelihoods(List, NamedTuple)</code></a>

 3. And again (make sure you use the new estimatorParams (a.k.a <a href="../../../../org/numenta/nupic/util/NamedTuple.html" title="class in org.numenta.nupic.util"><code>NamedTuple</code></a>) returned 
    in the above <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms"><code>AnomalyLikelihoodMetrics</code></a> call to updateAnomalyLikelihoods!)

    <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms"><code>AnomalyLikelihoodMetrics</code></a> { likelihoods, avgRecordList, estimatorParams } = 
       <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#updateAnomalyLikelihoods-java.util.List-org.numenta.nupic.util.NamedTuple-"><code>updateAnomalyLikelihoods(List, NamedTuple)</code></a>

 4. Every once in a while update estimator with a lot of recent data

    <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms"><code>AnomalyLikelihoodMetrics</code></a> { likelihoods, avgRecordList, estimatorParams } = 
        <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#estimateAnomalyLikelihoods-java.util.List-int-int-"><code>estimateAnomalyLikelihoods(List, int, int)</code></a>
 </pre>
 </p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Numenta, David Ray</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../org/numenta/nupic/algorithms/Anomaly.html" title="class in org.numenta.nupic.algorithms"><code>Anomaly</code></a>, 
<a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms"><code>AnomalyLikelihoodMetrics</code></a>, 
<a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms"><code>Sample</code></a>, 
<a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.AnomalyParams.html" title="class in org.numenta.nupic.algorithms"><code>AnomalyLikelihood.AnomalyParams</code></a>, 
<a href="../../../../org/numenta/nupic/algorithms/Statistic.html" title="class in org.numenta.nupic.algorithms"><code>Statistic</code></a>, 
<a href="../../../../org/numenta/nupic/algorithms/MovingAverage.html" title="class in org.numenta.nupic.algorithms"><code>MovingAverage</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.AnomalyParams.html" title="class in org.numenta.nupic.algorithms">AnomalyLikelihood.AnomalyParams</a></span></code>
<div class="block">
 Extends the dictionary key lookup functionality of the parent class to add
 definite typing for parameter retrieval.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.org.numenta.nupic.algorithms.Anomaly">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;org.numenta.nupic.algorithms.<a href="../../../../org/numenta/nupic/algorithms/Anomaly.html" title="class in org.numenta.nupic.algorithms">Anomaly</a></h3>
<code><a href="../../../../org/numenta/nupic/algorithms/Anomaly.AveragedAnomalyRecordList.html" title="class in org.numenta.nupic.algorithms">Anomaly.AveragedAnomalyRecordList</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.Mode.html" title="enum in org.numenta.nupic.algorithms">Anomaly.Mode</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#claLearningPeriod">claLearningPeriod</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.AnomalyParams.html" title="class in org.numenta.nupic.algorithms">AnomalyLikelihood.AnomalyParams</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#distribution">distribution</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#estimationSamples">estimationSamples</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.util.List&lt;<a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms">Sample</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#historicalScores">historicalScores</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#isWeighted">isWeighted</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#iteration">iteration</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static Logger</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#LOG">LOG</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#probationaryPeriod">probationaryPeriod</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private static double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#Q">Q</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#reestimationPeriod">reestimationPeriod</a></span></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.numenta.nupic.algorithms.Anomaly">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.numenta.nupic.algorithms.<a href="../../../../org/numenta/nupic/algorithms/Anomaly.html" title="class in org.numenta.nupic.algorithms">Anomaly</a></h3>
<code><a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_DIST">KEY_DIST</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_ESTIMATION_SAMPLES">KEY_ESTIMATION_SAMPLES</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_HIST_LIKE">KEY_HIST_LIKE</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_HIST_VALUES">KEY_HIST_VALUES</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_IS_WEIGHTED">KEY_IS_WEIGHTED</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_LEARNING_PERIOD">KEY_LEARNING_PERIOD</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_MEAN">KEY_MEAN</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_MODE">KEY_MODE</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_MVG_AVG">KEY_MVG_AVG</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_STDEV">KEY_STDEV</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_TOTAL">KEY_TOTAL</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_USE_MOVING_AVG">KEY_USE_MOVING_AVG</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_VARIANCE">KEY_VARIANCE</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#KEY_WINDOW_SIZE">KEY_WINDOW_SIZE</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#movingAverage">movingAverage</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#useMovingAverage">useMovingAverage</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#VALUE_NONE">VALUE_NONE</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#AnomalyLikelihood-boolean-int-boolean-int-int-">AnomalyLikelihood</a></span>(boolean&nbsp;useMovingAvg,
                 int&nbsp;windowSize,
                 boolean&nbsp;isWeighted,
                 int&nbsp;claLearningPeriod,
                 int&nbsp;estimationSamples)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#anomalyProbability-double-double-DateTime-">anomalyProbability</a></span>(double&nbsp;value,
                  double&nbsp;anomalyScore,
                  DateTime&nbsp;timestamp)</code>
<div class="block">Return the probability that the current value plus anomaly score represents
 an anomaly given the historical distribution of anomaly scores.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/numenta/nupic/algorithms/Anomaly.AveragedAnomalyRecordList.html" title="class in org.numenta.nupic.algorithms">Anomaly.AveragedAnomalyRecordList</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#anomalyScoreMovingAverage-java.util.List-int-">anomalyScoreMovingAverage</a></span>(java.util.List&lt;<a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms">Sample</a>&gt;&nbsp;anomalyScores,
                         int&nbsp;windowSize)</code>
<div class="block">Given a list of anomaly scores return a list of averaged records.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#compute-int:A-int:A-double-long-">compute</a></span>(int[]&nbsp;activeColumns,
       int[]&nbsp;predictedColumns,
       double&nbsp;inputValue,
       long&nbsp;timestamp)</code>
<div class="block">Compute the anomaly score as the percent of active columns not predicted.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#computeLogLikelihood-double-">computeLogLikelihood</a></span>(double&nbsp;likelihood)</code>
<div class="block">Compute a log scale representation of the likelihood value.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms">AnomalyLikelihoodMetrics</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#estimateAnomalyLikelihoods-java.util.List-int-int-">estimateAnomalyLikelihoods</a></span>(java.util.List&lt;<a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms">Sample</a>&gt;&nbsp;anomalyScores,
                          int&nbsp;averagingWindow,
                          int&nbsp;skipRecords)</code>
<div class="block">Given a series of anomaly scores, compute the likelihood for each score.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/numenta/nupic/algorithms/Statistic.html" title="class in org.numenta.nupic.algorithms">Statistic</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#estimateNormal-double:A-boolean-">estimateNormal</a></span>(double[]&nbsp;sampleData,
              boolean&nbsp;performLowerBoundCheck)</code>
<div class="block">A Map containing the parameters of a normal distribution based on
 the sampleData.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#filterLikelihoods-double:A-">filterLikelihoods</a></span>(double[]&nbsp;likelihoods)</code>
<div class="block">Filter the list of raw (pre-filtered) likelihoods so that we only preserve
 sharp increases in likelihood.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>double[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#filterLikelihoods-double:A-double-double-">filterLikelihoods</a></span>(double[]&nbsp;likelihoods,
                 double&nbsp;redThreshold,
                 double&nbsp;yellowThreshold)</code>
<div class="block">Filter the list of raw (pre-filtered) likelihoods so that we only preserve
 sharp increases in likelihood.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#isValidEstimatorParams-org.numenta.nupic.util.NamedTuple-">isValidEstimatorParams</a></span>(<a href="../../../../org/numenta/nupic/util/NamedTuple.html" title="class in org.numenta.nupic.util">NamedTuple</a>&nbsp;params)</code>
<div class="block">Returns a flag indicating whether the specified params are valid.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#normalProbability-double--">normalProbability</a></span>(double&nbsp;x,
                 &lt;any&gt;&nbsp;named)</code>
<div class="block">Given the normal distribution specified in distributionParams, return
 the probability of getting samples > x
 This is essentially the Q-function</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="../../../../org/numenta/nupic/algorithms/Statistic.html" title="class in org.numenta.nupic.algorithms">Statistic</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#nullDistribution--">nullDistribution</a></span>()</code>
<div class="block">Returns a distribution that is very broad and makes every anomaly
 score between 0 and 1 pretty likely</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms">AnomalyLikelihoodMetrics</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#updateAnomalyLikelihoods-java.util.List-org.numenta.nupic.util.NamedTuple-">updateAnomalyLikelihoods</a></span>(java.util.List&lt;<a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms">Sample</a>&gt;&nbsp;anomalyScores,
                        <a href="../../../../org/numenta/nupic/util/NamedTuple.html" title="class in org.numenta.nupic.util">NamedTuple</a>&nbsp;params)</code>
<div class="block">Compute updated probabilities for anomalyScores using the given params.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.numenta.nupic.algorithms.Anomaly">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.numenta.nupic.algorithms.<a href="../../../../org/numenta/nupic/algorithms/Anomaly.html" title="class in org.numenta.nupic.algorithms">Anomaly</a></h3>
<code><a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#computeRawAnomalyScore-int:A-int:A-">computeRawAnomalyScore</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#create--">create</a>, <a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#create-java.util.Map-">create</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="LOG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LOG</h4>
<pre>private static final&nbsp;Logger LOG</pre>
</li>
</ul>
<a name="claLearningPeriod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>claLearningPeriod</h4>
<pre>private&nbsp;int claLearningPeriod</pre>
</li>
</ul>
<a name="estimationSamples">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimationSamples</h4>
<pre>private&nbsp;int estimationSamples</pre>
</li>
</ul>
<a name="probationaryPeriod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>probationaryPeriod</h4>
<pre>private&nbsp;int probationaryPeriod</pre>
</li>
</ul>
<a name="iteration">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>iteration</h4>
<pre>private&nbsp;int iteration</pre>
</li>
</ul>
<a name="reestimationPeriod">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reestimationPeriod</h4>
<pre>private&nbsp;int reestimationPeriod</pre>
</li>
</ul>
<a name="isWeighted">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isWeighted</h4>
<pre>private&nbsp;boolean isWeighted</pre>
</li>
</ul>
<a name="historicalScores">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>historicalScores</h4>
<pre>private&nbsp;java.util.List&lt;<a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms">Sample</a>&gt; historicalScores</pre>
</li>
</ul>
<a name="distribution">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>distribution</h4>
<pre>private&nbsp;<a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.AnomalyParams.html" title="class in org.numenta.nupic.algorithms">AnomalyLikelihood.AnomalyParams</a> distribution</pre>
</li>
</ul>
<a name="Q">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Q</h4>
<pre>private static&nbsp;double[] Q</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AnomalyLikelihood-boolean-int-boolean-int-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AnomalyLikelihood</h4>
<pre>public&nbsp;AnomalyLikelihood(boolean&nbsp;useMovingAvg,
                         int&nbsp;windowSize,
                         boolean&nbsp;isWeighted,
                         int&nbsp;claLearningPeriod,
                         int&nbsp;estimationSamples)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="computeLogLikelihood-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeLogLikelihood</h4>
<pre>public static&nbsp;double&nbsp;computeLogLikelihood(double&nbsp;likelihood)</pre>
<div class="block">Compute a log scale representation of the likelihood value. Since the
 likelihood computations return low probabilities that often go into four 9's
 or five 9's, a log value is more useful for visualization, thresholding,
 etc.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>likelihood</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="anomalyProbability-double-double-DateTime-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>anomalyProbability</h4>
<pre>public&nbsp;double&nbsp;anomalyProbability(double&nbsp;value,
                                 double&nbsp;anomalyScore,
                                 DateTime&nbsp;timestamp)</pre>
<div class="block">Return the probability that the current value plus anomaly score represents
 an anomaly given the historical distribution of anomaly scores. The closer
 the number is to 1, the higher the chance it is an anomaly.

 Given the current metric value, plus the current anomaly score, output the
 anomalyLikelihood for this record.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>value</code> - input value</dd>
<dd><code>anomalyScore</code> - current anomaly score</dd>
<dd><code>timestamp</code> - (optional) timestamp</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Given the current metric value, plus the current anomaly score, output the
 anomalyLikelihood for this record.</dd>
</dl>
</li>
</ul>
<a name="estimateAnomalyLikelihoods-java.util.List-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateAnomalyLikelihoods</h4>
<pre>public&nbsp;<a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms">AnomalyLikelihoodMetrics</a>&nbsp;estimateAnomalyLikelihoods(java.util.List&lt;<a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms">Sample</a>&gt;&nbsp;anomalyScores,
                                                           int&nbsp;averagingWindow,
                                                           int&nbsp;skipRecords)</pre>
<div class="block">Given a series of anomaly scores, compute the likelihood for each score. This
 function should be called once on a bunch of historical anomaly scores for an
 initial estimate of the distribution. It should be called again every so often
 (say every 50 records) to update the estimate.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>anomalyScores</code> - </dd>
<dd><code>averagingWindow</code> - </dd>
<dd><code>skipRecords</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="updateAnomalyLikelihoods-java.util.List-org.numenta.nupic.util.NamedTuple-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateAnomalyLikelihoods</h4>
<pre>public&nbsp;<a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms">AnomalyLikelihoodMetrics</a>&nbsp;updateAnomalyLikelihoods(java.util.List&lt;<a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms">Sample</a>&gt;&nbsp;anomalyScores,
                                                         <a href="../../../../org/numenta/nupic/util/NamedTuple.html" title="class in org.numenta.nupic.util">NamedTuple</a>&nbsp;params)</pre>
<div class="block">Compute updated probabilities for anomalyScores using the given params.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>anomalyScores</code> - a list of records. Each record is a list with a <a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms"><code>Sample</code></a> containing the
                                following three elements: [timestamp, value, score]</dd>
<dd><code>params</code> - Associative <a href="../../../../org/numenta/nupic/util/NamedTuple.html" title="class in org.numenta.nupic.util"><code>NamedTuple</code></a> returned by the <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihoodMetrics.html" title="class in org.numenta.nupic.algorithms"><code>AnomalyLikelihoodMetrics</code></a> from
                          <a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.html#estimateAnomalyLikelihoods-java.util.List-int-int-"><code>estimateAnomalyLikelihoods(List, int, int)</code></a></dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="filterLikelihoods-double:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filterLikelihoods</h4>
<pre>public&nbsp;double[]&nbsp;filterLikelihoods(double[]&nbsp;likelihoods)</pre>
<div class="block">Filter the list of raw (pre-filtered) likelihoods so that we only preserve
 sharp increases in likelihood. 'likelihoods' can be a numpy array of floats or
 a list of floats.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>likelihoods</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="filterLikelihoods-double:A-double-double-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>filterLikelihoods</h4>
<pre>public&nbsp;double[]&nbsp;filterLikelihoods(double[]&nbsp;likelihoods,
                                  double&nbsp;redThreshold,
                                  double&nbsp;yellowThreshold)</pre>
<div class="block">Filter the list of raw (pre-filtered) likelihoods so that we only preserve
 sharp increases in likelihood. 'likelihoods' can be an array of floats or
 a list of floats.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>likelihoods</code> - </dd>
<dd><code>redThreshold</code> - </dd>
<dd><code>yellowThreshold</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="anomalyScoreMovingAverage-java.util.List-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>anomalyScoreMovingAverage</h4>
<pre>public&nbsp;<a href="../../../../org/numenta/nupic/algorithms/Anomaly.AveragedAnomalyRecordList.html" title="class in org.numenta.nupic.algorithms">Anomaly.AveragedAnomalyRecordList</a>&nbsp;anomalyScoreMovingAverage(java.util.List&lt;<a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms">Sample</a>&gt;&nbsp;anomalyScores,
                                                                   int&nbsp;windowSize)</pre>
<div class="block">Given a list of anomaly scores return a list of averaged records.
 anomalyScores is assumed to be a list of records of the form:
 <pre>
      Sample:
           dt = Tuple(2013, 8, 10, 23, 0) --> Date Fields
           sample = (double) 6.0
           metric(avg) = (double) 1.0
 </pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>anomalyScores</code> - List of <a href="../../../../org/numenta/nupic/algorithms/Sample.html" title="class in org.numenta.nupic.algorithms"><code>Sample</code></a> objects (described contents above)</dd>
<dd><code>windowSize</code> - Count of historical items over which to compute the average</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Each record in the returned list contains [datetime field, value, averaged score]</dd>
</dl>
</li>
</ul>
<a name="estimateNormal-double:A-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>estimateNormal</h4>
<pre>public&nbsp;<a href="../../../../org/numenta/nupic/algorithms/Statistic.html" title="class in org.numenta.nupic.algorithms">Statistic</a>&nbsp;estimateNormal(double[]&nbsp;sampleData,
                                boolean&nbsp;performLowerBoundCheck)</pre>
<div class="block">A Map containing the parameters of a normal distribution based on
 the sampleData.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>sampleData</code> - </dd>
<dd><code>performLowerBoundCheck</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="nullDistribution--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nullDistribution</h4>
<pre>public&nbsp;<a href="../../../../org/numenta/nupic/algorithms/Statistic.html" title="class in org.numenta.nupic.algorithms">Statistic</a>&nbsp;nullDistribution()</pre>
<div class="block">Returns a distribution that is very broad and makes every anomaly
 score between 0 and 1 pretty likely</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="normalProbability-double--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>normalProbability</h4>
<pre>public&nbsp;double&nbsp;normalProbability(double&nbsp;x,
                                &lt;any&gt;&nbsp;named)</pre>
<div class="block">Given the normal distribution specified in distributionParams, return
 the probability of getting samples > x
 This is essentially the Q-function</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>x</code> - </dd>
<dd><code>named</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="compute-int:A-int:A-double-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compute</h4>
<pre>public&nbsp;double&nbsp;compute(int[]&nbsp;activeColumns,
                      int[]&nbsp;predictedColumns,
                      double&nbsp;inputValue,
                      long&nbsp;timestamp)</pre>
<div class="block">Compute the anomaly score as the percent of active columns not predicted.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../org/numenta/nupic/algorithms/Anomaly.html#compute-int:A-int:A-double-long-">compute</a></code>&nbsp;in class&nbsp;<code><a href="../../../../org/numenta/nupic/algorithms/Anomaly.html" title="class in org.numenta.nupic.algorithms">Anomaly</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>activeColumns</code> - array of active column indices</dd>
<dd><code>predictedColumns</code> - array of columns indices predicted in this step
                              (used for anomaly in step T+1)</dd>
<dd><code>inputValue</code> - (optional) value of current input to encoders 
                              (eg "cat" for category encoder)
                              (used in anomaly-likelihood)</dd>
<dd><code>timestamp</code> - timestamp: (optional) date timestamp when the sample occurred
                              (used in anomaly-likelihood)</dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="isValidEstimatorParams-org.numenta.nupic.util.NamedTuple-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isValidEstimatorParams</h4>
<pre>public&nbsp;boolean&nbsp;isValidEstimatorParams(<a href="../../../../org/numenta/nupic/util/NamedTuple.html" title="class in org.numenta.nupic.util">NamedTuple</a>&nbsp;params)</pre>
<div class="block">Returns a flag indicating whether the specified params are valid.
 true if so, false if not</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>params</code> - a <a href="../../../../org/numenta/nupic/util/NamedTuple.html" title="class in org.numenta.nupic.util"><code>NamedTuple</code></a> containing { distribution, movingAverage, historicalLikelihoods }</dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AnomalyLikelihood.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/numenta/nupic/algorithms/Anomaly.Mode.html" title="enum in org.numenta.nupic.algorithms"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../org/numenta/nupic/algorithms/AnomalyLikelihood.AnomalyParams.html" title="class in org.numenta.nupic.algorithms"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/numenta/nupic/algorithms/AnomalyLikelihood.html" target="_top">Frames</a></li>
<li><a href="AnomalyLikelihood.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
